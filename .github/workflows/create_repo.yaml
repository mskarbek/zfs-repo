---
name: OpenZFS repo
on:
  workflow_dispatch:
jobs:
  check-versions:
    strategy:
      matrix:
        os:
          [
            quay.io/fedora/fedora:41,
            quay.io/fedora/fedora:42,
            quay.io/fedora/fedora:rawhide,
            quay.io/fedora/eln:latest,
            quay.io/centos/centos:stream9,
            quay.io/centos/centos:stream10,
          ]
        version: [2.2, 2.3, 2.4]
      fail-fast: false
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v5
      - id: meta
        run: |
          VERSION = jq -r .dwonload_url versions/openzfs-${{ matrix.os }}.json
          MAX_KERNEL_VERSION = jq -r .dwonload_url versions/openzfs-${{ matrix.os }}.json
          DOWNLOAD_URL = jq -r .dwonload_url versions/openzfs-${{ matrix.os }}.json
          echo $VERSION
          echo $MAX_KERNEL_VERSION
          echo $DOWNLOAD_URL
